<div class="wrapper">
    <h1>Dashboard</h1>

    <div>

        <div class="dashboard-card">
            <h3>Products (<?php echo count($products); ?>)</h3>

            <table>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Actions</th>
                </tr>
                <?php foreach ($products as $product): ?>
                <tr>
                    <td>
                        <a class="no-underline" href="products/<?php echo $product->id; ?>/edit">
                                <?php echo $product->name; ?>
                        </a>
                    </td>
                    <td>
                        <?php echo $product->getPrice(); ?>
                    </td>
                    <td>
                    <?php echo $product->stock; ?>
                    </td>
                    <td>
                        <a href="products/<?php echo $product->id; ?>/edit" class="btn">
                            <svg class="dashboard-icon dashboard-icon-edit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.3 469.3"><path d="M347.9 151.4c-4-4-11.1-4-15.1 0l-202.9 203c-2.4 2.4-3.5 5.9-3 9.3.6 3.4 2.7 6.3 5.8 7.8l16.7 8.3v28l-51 14.6-51.5-51.6 14.6-51.1h28l8.3 16.7c1.5 3.1 4.4 5.2 7.8 5.8.6.1 1.1.1 1.7.1 2.8 0 5.5-1.1 7.5-3.1l202.9-203.1c2-2 3.1-4.7 3.1-7.5s-1.1-5.5-3.1-7.5l-39.2-39.3c-2-2-4.7-3.1-7.5-3.1s-5.6 1.1-7.6 3.2L45.8 301.7c-.1.1-.1.3-.2.4-1.1 1.2-2 2.5-2.5 4.2l-18.5 64.9L.4 455.7c-1.1 3.7 0 7.7 2.7 10.5 2 2 4.8 3.1 7.5 3.1 1 0 2-.1 2.9-.4L98 444.7l64.8-18.5c.2-.1.3-.2.5-.3.7-.2 1.3-.6 1.9-1 .6-.4 1.2-.7 1.7-1.1.1-.1.3-.2.5-.3L387 205.7c2-2 3.1-4.7 3.2-7.6 0-2.8-1.1-5.6-3.1-7.6l-39.2-39.1zM456.8 76.2l-64-64.1c-16.1-16.1-44.2-16.2-60.4 0l-39.1 39.5c-4.1 4.2-4.1 10.9 0 15.1l108.9 109c2.1 2.1 4.8 3.1 7.5 3.1s5.4-1 7.5-3.1l39.5-39.1c8.1-8.1 12.5-18.8 12.5-30.2s-4.3-22.2-12.4-30.2z"/></svg>
                        </a>
                        
                        <a href="dashboard/products/delete/<?php echo $product->id; ?>" class="btn">
                            <svg class="dashboard-icon dashboard-icon-trash" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.867 477.867"><path d="M443.733 68.267H324.267V51.2c0-28.277-22.923-51.2-51.2-51.2H204.8c-28.277 0-51.2 22.923-51.2 51.2v17.067H34.133c-9.426 0-17.067 7.641-17.067 17.067S24.708 102.4 34.133 102.4h18.551l32.649 359.953c.805 8.814 8.216 15.55 17.067 15.514h273.067c8.851.037 16.261-6.699 17.067-15.514L425.182 102.4h18.552c9.426 0 17.067-7.641 17.067-17.067s-7.642-17.066-17.068-17.066zm-256-17.067c0-9.426 7.641-17.067 17.067-17.067h68.267c9.426 0 17.067 7.641 17.067 17.067v17.067h-102.4V51.2zm-15.769 358.394l-.086.006h-1.212c-8.972.023-16.43-6.906-17.067-15.855l-17.067-238.933c-.669-9.426 6.429-17.609 15.855-18.278 9.426-.669 17.609 6.429 18.278 15.855l17.067 238.933c.693 9.4-6.367 17.581-15.768 18.272zM256 392.533c0 9.426-7.641 17.067-17.067 17.067s-17.067-7.641-17.067-17.067V153.6c0-9.426 7.641-17.067 17.067-17.067S256 144.174 256 153.6v238.933zm85.333-237.721l-17.067 238.933c-.637 8.949-8.095 15.878-17.067 15.855h-1.229c-9.403-.653-16.496-8.805-15.843-18.208l.005-.07L307.2 152.388c.669-9.426 8.853-16.524 18.278-15.855 9.426.67 16.525 8.853 15.855 18.279z"/></svg>
                        </a>
                        
                    </td>
                </tr>
                <?php endforeach; ?>
                
            </table>
            <div class="dashboard-btn-add">
                <a href="dashboard/products/add">
                   + Add Product
                </a>
            </div>
        </div>

        <div class="dashboard-card">
            <h3>Accounts (<?php echo count($users); ?>)</h3>

            <table>
                <thead>
                <tr>
                    <th>User Number</th>
                    <th>Email</th>
                    <th>Admin</th>
                    <th>Actions</th>
                </tr>
                </thead>

                <tbody>
                <?php foreach ($users as $user): ?>
                <tr>
                    <td><?php echo $user->id; ?></td>
                    <td><?php echo $user->email; ?></td>
                    <td><?php echo ($user->is_admin === true ? 'yes': 'no'); ?></td>
                    <td>
                        <a href="dashboard/accounts/edit/<?php echo $user->id; ?>" class="btn">
                            <svg class="dashboard-icon dashboard-icon-edit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.3 469.3"><path d="M347.9 151.4c-4-4-11.1-4-15.1 0l-202.9 203c-2.4 2.4-3.5 5.9-3 9.3.6 3.4 2.7 6.3 5.8 7.8l16.7 8.3v28l-51 14.6-51.5-51.6 14.6-51.1h28l8.3 16.7c1.5 3.1 4.4 5.2 7.8 5.8.6.1 1.1.1 1.7.1 2.8 0 5.5-1.1 7.5-3.1l202.9-203.1c2-2 3.1-4.7 3.1-7.5s-1.1-5.5-3.1-7.5l-39.2-39.3c-2-2-4.7-3.1-7.5-3.1s-5.6 1.1-7.6 3.2L45.8 301.7c-.1.1-.1.3-.2.4-1.1 1.2-2 2.5-2.5 4.2l-18.5 64.9L.4 455.7c-1.1 3.7 0 7.7 2.7 10.5 2 2 4.8 3.1 7.5 3.1 1 0 2-.1 2.9-.4L98 444.7l64.8-18.5c.2-.1.3-.2.5-.3.7-.2 1.3-.6 1.9-1 .6-.4 1.2-.7 1.7-1.1.1-.1.3-.2.5-.3L387 205.7c2-2 3.1-4.7 3.2-7.6 0-2.8-1.1-5.6-3.1-7.6l-39.2-39.1zM456.8 76.2l-64-64.1c-16.1-16.1-44.2-16.2-60.4 0l-39.1 39.5c-4.1 4.2-4.1 10.9 0 15.1l108.9 109c2.1 2.1 4.8 3.1 7.5 3.1s5.4-1 7.5-3.1l39.5-39.1c8.1-8.1 12.5-18.8 12.5-30.2s-4.3-22.2-12.4-30.2z"/></svg>
                        </a>
                        <?php if (\App\Models\User::getLoggedInUser()->id !== $user->id): ?>
                        <a href="dashboard/accounts/delete/<?php echo $user->id; ?>" class="btn">
                            <svg class="dashboard-icon dashboard-icon-trash" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.867 477.867"><path d="M443.733 68.267H324.267V51.2c0-28.277-22.923-51.2-51.2-51.2H204.8c-28.277 0-51.2 22.923-51.2 51.2v17.067H34.133c-9.426 0-17.067 7.641-17.067 17.067S24.708 102.4 34.133 102.4h18.551l32.649 359.953c.805 8.814 8.216 15.55 17.067 15.514h273.067c8.851.037 16.261-6.699 17.067-15.514L425.182 102.4h18.552c9.426 0 17.067-7.641 17.067-17.067s-7.642-17.066-17.068-17.066zm-256-17.067c0-9.426 7.641-17.067 17.067-17.067h68.267c9.426 0 17.067 7.641 17.067 17.067v17.067h-102.4V51.2zm-15.769 358.394l-.086.006h-1.212c-8.972.023-16.43-6.906-17.067-15.855l-17.067-238.933c-.669-9.426 6.429-17.609 15.855-18.278 9.426-.669 17.609 6.429 18.278 15.855l17.067 238.933c.693 9.4-6.367 17.581-15.768 18.272zM256 392.533c0 9.426-7.641 17.067-17.067 17.067s-17.067-7.641-17.067-17.067V153.6c0-9.426 7.641-17.067 17.067-17.067S256 144.174 256 153.6v238.933zm85.333-237.721l-17.067 238.933c-.637 8.949-8.095 15.878-17.067 15.855h-1.229c-9.403-.653-16.496-8.805-15.843-18.208l.005-.07L307.2 152.388c.669-9.426 8.853-16.524 18.278-15.855 9.426.67 16.525 8.853 15.855 18.279z"/></svg>
                        </a>
                        <?php endif; ?>
                    </td>
                </tr>
                <?php endforeach; ?>
                </tbody>
            </table>

        </div>
        
        <div class="dashboard-card">
            <h3>
                Open Orders (<?php echo count($openOrders); ?>)
            </h3>

            <table>
                <tr>
                    <th>Ordernumber</th>
                    <th>Orderdate</th>
                    <th>Actions</th>
                    
                </tr>
                <?php foreach ($openOrders as $openOrder): ?>
                <tr>
                    <td>
                        <a href="orders/<?php echo $openOrder->id; ?>/edit"><?php echo $openOrder->id; ?></a>
                    </td>
                    <td><a href="orders/<?php echo $openOrder->id; ?>/edit"><?php echo $openOrder->crdate; ?></a></td>
                
                    <td>
                        <a href="orders/<?php echo $openOrder->id; ?>/edit" class="btn">
                            <svg class="dashboard-icon dashboard-icon-edit" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.3 469.3"><path d="M347.9 151.4c-4-4-11.1-4-15.1 0l-202.9 203c-2.4 2.4-3.5 5.9-3 9.3.6 3.4 2.7 6.3 5.8 7.8l16.7 8.3v28l-51 14.6-51.5-51.6 14.6-51.1h28l8.3 16.7c1.5 3.1 4.4 5.2 7.8 5.8.6.1 1.1.1 1.7.1 2.8 0 5.5-1.1 7.5-3.1l202.9-203.1c2-2 3.1-4.7 3.1-7.5s-1.1-5.5-3.1-7.5l-39.2-39.3c-2-2-4.7-3.1-7.5-3.1s-5.6 1.1-7.6 3.2L45.8 301.7c-.1.1-.1.3-.2.4-1.1 1.2-2 2.5-2.5 4.2l-18.5 64.9L.4 455.7c-1.1 3.7 0 7.7 2.7 10.5 2 2 4.8 3.1 7.5 3.1 1 0 2-.1 2.9-.4L98 444.7l64.8-18.5c.2-.1.3-.2.5-.3.7-.2 1.3-.6 1.9-1 .6-.4 1.2-.7 1.7-1.1.1-.1.3-.2.5-.3L387 205.7c2-2 3.1-4.7 3.2-7.6 0-2.8-1.1-5.6-3.1-7.6l-39.2-39.1zM456.8 76.2l-64-64.1c-16.1-16.1-44.2-16.2-60.4 0l-39.1 39.5c-4.1 4.2-4.1 10.9 0 15.1l108.9 109c2.1 2.1 4.8 3.1 7.5 3.1s5.4-1 7.5-3.1l39.5-39.1c8.1-8.1 12.5-18.8 12.5-30.2s-4.3-22.2-12.4-30.2z"/></svg>
                        </a> 
                    </td>
                </tr>
                <?php endforeach; ?>
            </table>
        </div>

        
    </div>
</div>
